# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master



stages:
  - stage: RestoreAndRebuildSln
    jobs: 
    - job:
      pool:
        vmImage: "windows-latest"
      steps:
        - task: NuGetToolInstaller@1
          displayName: install nuget tools
        - task: NuGetCommand@2
          displayName: restore nuget packages
          inputs:
           command: restore
           restoreSolution: '**/*.sln'
        - task: VSBuild@1
          displayName: build solution
          inputs:
           solution: '**/*.sln'
           platform: 'Any CPU'
           configuration: 'Release'
        - task: VSTest@2
          displayName: VSTest
          inputs:
           platform: 'Any CPU'
           configuration: 'Release'
           codeCoverageEnabled: True
           runInParallel: True
           runTestsInIsolation: True
           vsTestVersion: 'toolsInstaller'
           distributionBatchType: 'basedOnTestCases'


